#include <iostream>
#include <filesystem>
#include <fstream>
#include <string>

namespace fs = std::filesystem;

int main() {
    std::string sourceDir, destDir;
    std::cout << "Enter source directory path: ";
    std::cin >> sourceDir;
    std::cout << "Enter destination directory path: ";
    std::cin >> destDir;

    try {
        // Create source directory if it doesn't exist
        if (!fs::exists(sourceDir)) {
            fs::create_directory(sourceDir);
            std::cout << "Created source directory: " << sourceDir << std::endl;
        } else {
            std::cout << "Source directory already exists: " << sourceDir << std::endl;
        }

        // Create destination directory if it doesn't exist
        if (!fs::exists(destDir)) {
            fs::create_directory(destDir);
            std::cout << "Created destination directory: " << destDir << std::endl;
        } else {
            std::cout << "Destination directory already exists: " << destDir << std::endl;
        }

        // Copy all files from source to destination
        for (const auto& entry : fs::directory_iterator(sourceDir)) {
            if (fs::is_regular_file(entry.path())) {
                fs::path destFile = fs::path(destDir) / entry.path().filename();
                if (!fs::exists(destFile)) {
                    fs::copy_file(entry.path(), destFile);
                    std::cout << "Copied " << entry.path() << " to " << destFile << std::endl;
                } else {
                    std::cout << "File already exists, skipped: " << destFile << std::endl;
                }
            }
        }
    } catch (const fs::filesystem_error& e) {
        std::cerr << "Filesystem error: " << e.what() << std::endl;
    } catch (...) {
        std::cerr << "Unknown error occurred." << std::endl;
    }

    return 0;
}
